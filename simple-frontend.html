<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeCraft Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen flex items-center justify-center">
        <div class="max-w-md w-full bg-white rounded-lg shadow-md p-6">
            <h2 class="text-2xl font-bold text-center mb-6">CodeCraft Login</h2>
            
            <form id="loginForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700">Email</label>
                    <input type="email" id="email" value="admin@codecraft.com" 
                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md" required>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="password" value="admin123"
                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md" required>
                </div>
                
                <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700">
                    Sign In
                </button>
            </form>
            
            <div id="message" class="mt-4 text-center"></div>
            <div id="userInfo" class="mt-4 p-4 bg-green-50 rounded-md hidden">
                <h3 class="font-bold text-green-800">Login Successful!</h3>
                <p id="userName" class="text-green-700"></p>
                <p id="userEmail" class="text-green-700"></p>
                <button onclick="logout()" class="mt-2 bg-red-500 text-white px-4 py-2 rounded">Logout</button>
            </div>
        </div>
    </div>

    <script>
        let authToken = null;
        
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const message = document.getElementById('message');
            
            message.innerHTML = '<div class="text-blue-600">Logging in...</div>';
            
            try {
                const response = await fetch('https://ibra445him.pythonanywhere.com/api/login', {
                    method: 'POST',
                    mode: 'cors',
                    headers: {
                        'Content-Type': 'application/json',
                        'Access-Control-Allow-Origin': '*',
                    },
                    body: JSON.stringify({ email, password }),
                });
                
                const data = await response.json();
                
                if (data.success) {
                    authToken = data.token;
                    document.getElementById('loginForm').style.display = 'none';
                    document.getElementById('userInfo').classList.remove('hidden');
                    document.getElementById('userName').textContent = 'Name: ' + data.user.name;
                    document.getElementById('userEmail').textContent = 'Email: ' + data.user.email;
                    message.innerHTML = '<div class="text-green-600">Welcome!</div>';
                } else {
                    message.innerHTML = '<div class="text-red-600">Error: ' + data.message + '</div>';
                }
            } catch (error) {
                message.innerHTML = '<div class="text-red-600">Network error: ' + error.message + '</div>';
            }
        });
        
        function logout() {
            authToken = null;
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('userInfo').classList.add('hidden');
            document.getElementById('message').innerHTML = '';
            document.getElementById('email').value = 'admin@codecraft.com';
            document.getElementById('password').value = 'admin123';
        }
    </script>
</body>
</html>